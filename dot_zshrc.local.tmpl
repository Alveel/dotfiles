# less as a pager is suboptimal for various programs.
# Most programs that I use have a sensible default.
unset PAGER

{{ if (eq .chezmoi.hostname "potatobee") -}}
# Add scripts to PATH
export PATH="$HOME/local/share/gem/ruby/3.0.0/bin:$HOME/.screenlayout:$PATH"
export GOPATH="/home/alwyn/go"

# Start ssh-agent
if [ -n "$DISPLAY" ];
then
    eval $(keychain --eval id_ed25519 id_rsa --agents ssh,gpg)
else
    eval $(keychain --eval id_ed25519 id_rsa --agents ssh,gpg --noask)
fi

# Gnome keyring
if [ -n "$DESKTOP_SESSION" ];then
    eval $(gnome-keyring-daemon --start)
    export SSH_AUTH_SOCK
fi

# Pyenv
export PYENV_ROOT=$HOME/.local/opt/pyenv
export PATH="$PYENV_ROOT/bin:$PATH"
eval "$(pyenv init --path)"
eval "$(pyenv virtualenv-init -)"
eval "$(pyenv init -)"

# The Fuck - https://github.com/nvbn/thefuck
eval $(thefuck --alias)
{{- end }}

# Aliases
alias view='vim -R'
alias witch=which
alias kc=kubectl
alias ssh='TERM=xterm-256color ssh'
alias sus='systemctl suspend'

alias crtinfo='openssl x509 -text -noout -in'
alias csrinfo='openssl req -text -noout -in'
alias rsainfo='openssl rsa -check -in'

custom_shutdown() {
  read "confirm?Do you really want to ${1}? "
  if [[ "$confirm" =~ ^[Yy]$ ]]
  then
    "$1"
  fi
}

alias poweroff='custom_shutdown poweroff'
alias reboot='custom_shutdown reboot'

{{- if (eq .chezmoi.hostname "refa") -}}
export EDITOR=vim
export PYENV_ROOT="$HOME/.pyenv"
export PATH="$PATH:$PYENV_ROOT/bin"
eval "$(pyenv init --path)"
eval "$(direnv hook zsh)"

# The Fuck - https://github.com/nvbn/thefuck
eval $(thefuck --alias)

autoload -U +X bashcompinit && bashcompinit
complete -o nospace -C /usr/bin/terraform terraform
{{- end }}

